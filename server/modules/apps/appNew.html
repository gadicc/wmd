<template name="appNew">
	<h2>Add App</h2>
	{{> appAdd}}
</template>

<template name="appAdd">
	<form id="appAdd">

		<p>
			<select id="appAdd_repoId">
				{{#each repos}}
					<option value="{{_id}}">{{name}}</option>
				{{/each}}
			</select>
			<select id="appAdd_branch">
				{{#each branches}}
					<option value="{{this}}">{{this}}</option>
				{{/each}}
			</select>
		</p>

		<p>
			Slug: <input type="text" id="appAdd_name" size=40 />
			([a-z][a-z0-9-_]{0,30}[a-z0-9])
		</p>
		<p>
			MeteorDir: <input type="text" id="appAdd_meteorDir" size=40 />
		</p>

		<p>
			Force Target:
			<select id="appAdd_server">
				{{#each servers}}
					<option value="{{_id}}">{{username}}</option>
				{{/each}}
			</select>
		</p>

		<p>Database:</p>
		<label><input type="radio" name="db" value="create"> Create new - required for multiple instances</label> (TODO)<br />
		<label><input type="radio" name="db" value="meteor"> Meteor internal - great for disposable apps</label> (TODO)<br />
		<label><input type="radio" name="db" value="wmd"> Pick an existing database from WMD</label> 
			<select id="appAdd_dbId">
				{{#each dbs}}
					<option value="{{_id}}">{{name}}</option>
				{{/each}}
			</select><br />
		<label><input type="radio" name="db" value="specify" checked> Specify your own MONGO_URL</label>
			<input type="text" /><br />

		<br />
		<p>
			<input type="submit">
		</p>

		<p>OR (coming soon, maybe):</p>

		<p>Local path: <input type="text"></p>

		<p>(Requires manual redeploy)</p>

	</form>
</template>
