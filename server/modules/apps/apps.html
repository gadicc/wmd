<template name="apps">
	<h1>All Apps</h1>
	{{> allApps}}

	<h2>Add App</h2>
	{{> appAdd}}
</template>

<template name="allApps">
	{{#each apps}}
		<table data-app-id="{{_id}}" class="table table-bordered" style="width: auto">
			<thead>
			<tr>
				<td> &nbsp; <a href="/apps/{{_id}}">{{name}}</a> &nbsp; </td>
			</tr>
			</thead><tbody><tr>
				<td>{{> sourceOptions}}</td>
			</tr><tr>
			  <td>
			  	<button data-action="setup" data-id="{{_id}}">Setup</button>
			  	<button data-action="update" data-id="{{_id}}">Update</button>
			  	<button data-action="start" data-id="{{_id}}">Start</button>
			  	<button data-action="stop" data-id="{{_id}}">Stop</button>
			  	<button data-action="delete" data-id="{{_id}}">Delete</button>
			  </td>
			</tr></tbody>
		</table>
	{{/each}}
</template>

<template name="appAdd">
	<form id="appAdd">

		<p>
			<select id="appAdd_repoId">
				{{#each repos}}
					<option value="{{_id}}">{{name}}</option>
				{{/each}}
			</select>
			<select id="appAdd_branch">
				{{#each branches}}
					<option value="{{this}}">{{this}}</option>
				{{/each}}
			</select>
		</p>

		<p>
			Name: <input type="text" id="appAdd_name" size=40 />
		</p>
		<p>
			MeteorDir: <input type="text" id="appAdd_meteorDir" size=40 />
		</p>

		<p>
			Force Target:
			<select id="appAdd_server">
				{{#each servers}}
					<option value="{{_id}}">{{username}}</option>
				{{/each}}
			</select>
		</p>

		<p>
			<input type="submit">
		</p>

		<p>OR (coming soon, maybe):</p>

		<p>Local path: <input type="text"></p>

		<p>(Requires manual redeploy)</p>

	</form>
</template>
