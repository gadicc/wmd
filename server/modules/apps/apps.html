<template name="apps">
	<h1>All Apps</h1>
	{{> allApps}}

	<h2>Add App</h2>
	{{> appAdd}}
</template>

<template name="appSidebar">
	<div id="appSidebar">
		<a href="/apps">Summary<div></div></a>
		<a href="/apps/new">Add New<div></div></a>
		<div></div>
		{{#each apps}}
			<a href="/apps/{{_id}}">{{name}}<div></div></a>
			{{activeLinks}}
		{{/each}}
	</div>
</template>

<template name="allApps">

	<table id="allApps" class="table table-bordered" style="width: auto">
		<thead>
			<tr>
				<th>Name</th>
				<th>Global State</th>
				<th>Actions</th>
			</tr>
		</thead><tbody>

		{{#each apps}}
			<tr>
				<td><a href="/apps/{{_id}}">{{name}}</a></td>
				<td>{{state}}</td>
			  <td>{{> appButtons}}</td>
			</tr>
		{{/each}}

		</tbody>
	</table>

</template>

<template name="appAdd">
	<form id="appAdd">

		<p>
			<select id="appAdd_repoId">
				{{#each repos}}
					<option value="{{_id}}">{{name}}</option>
				{{/each}}
			</select>
			<select id="appAdd_branch">
				{{#each branches}}
					<option value="{{this}}">{{this}}</option>
				{{/each}}
			</select>
		</p>

		<p>
			Slug: <input type="text" id="appAdd_name" size=40 />
			([a-z][a-z0-9-_]{0,30}[a-z0-9])
		</p>
		<p>
			MeteorDir: <input type="text" id="appAdd_meteorDir" size=40 />
		</p>

		<p>
			Force Target:
			<select id="appAdd_server">
				{{#each servers}}
					<option value="{{_id}}">{{username}}</option>
				{{/each}}
			</select>
		</p>

		<p>Database:</p>
		<label><input type="radio" name="db" value="create"> Create new - required for multiple instances</label><br />
		<label><input type="radio" name="db" value="meteor"> Meteor internal - great for disposable apps</label><br />
		<label><input type="radio" name="db" value="existing"> Pick an existing database from WMD</label> 
			<select name=""></select><br />
		<label><input type="radio" name="db" value="specify"> Specify your own MONGO_URL</label>
			<input type="text" /><br />

		<br />
		<p>
			<input type="submit">
		</p>

		<p>OR (coming soon, maybe):</p>

		<p>Local path: <input type="text"></p>

		<p>(Requires manual redeploy)</p>

	</form>
</template>
